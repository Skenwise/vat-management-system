[supervisord]
nodaemon=true

[program:mssql]
command=/opt/mssql/bin/sqlservr
user=mssql
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:init-db]
command=/bin/bash -c "sleep 30 && /opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P 'DemoPassword123!' -i /script.sql"
autorestart=false
startsecs=0

[program:fastapi]
command=python3 -m uvicorn main:app --host 0.0.0.0 --port 8000
directory=/app
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr